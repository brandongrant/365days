<div ng-include src="'views/step.html'" ng-controller="StepsCtrl"></div>

<div class="wrapper-left">

    <div class="step">
        <!-- title-->
        <div class="title-wrapper">
            <h1 class="title">Select a year</h1>
            <div ng-if="style=='done'" class="result">
                <span class="glyphicon glyphicon-ok"></span>
                {{ result }}
                <span><a ng-click="revert()">Edit</a>
            </div>
        </div>

        <!-- step 0. select year -->
        <div ng-if="!done" data-data="validYear" class="content">
            <div ng-if="firstDate">
                <p>You have been using Moves since {{ firstDate }}.</p>
            </div>
            <div>
                Choose a Year
                <div class="btn-group" uib-dropdown is-open="status.isopen">
                    <button id="year-button" type="button" class="btn btn-primary" uib-dropdown-toggle ng-disabled="disabled">
                        Available Years <span class="caret"></span>
                    </button>
                    <ul uib-dropdown-menu role="menu" aria-labelledby="year-button">
                        <li role="menuitem" ng-repeat="year in validYear"><a ng-click="setYear(year)">{{ year }}</a></li>
                    </ul>
                </div>
            </div>
            <hr/>
            <div>
                Or choose the starting date of 365 days
                <p class="input-group">
                    <input type="text" class="form-control" uib-datepicker-popup="MMMM dd, yyyy" ng-model="dt" show-weeks="false" placeholder="{{ initDate | amDateFormat: 'MMMM DD, YYYY'}}" is-open="datePicker.opened" min-date="minDate" max-date="maxDate" init-date="initDate" ng-required="true" show-button-bar="false" ng-change="setStartDate(this)">
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="open()"><i class="glyphicon glyphicon-calendar"></i></button>
                    </span>
                </p>
            </div>
        </div>
        <div ng-if="downloading">
            <h1>downloading now, please wait</h1>
            <div> {{ progress }} % </div>
        </div>
    </div>


    <p ng-if="done"><a class="btn btn-lg btn-success" ng-href="#/places">Next <span class="glyphicon glyphicon-ok"></span></a></p>
</div>
