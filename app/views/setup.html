<div class="step-wrapper">
    <div ng-repeat="step in steps" ng-class="step.style" class="step">

        <div class="title-wrapper">
            <h1 class="title"> Step{{ $index + 1 }}. {{ step.title }} </h1>
            <div ng-if="step.style=='done'" class="result">
                <span class="glyphicon glyphicon-ok"></span>
                {{ step.result }}
            </div>
        </div>

        <!-- step 0. select year -->
        <div ng-if="$index == 0" data-data="validYear" class="content">
            <div class="btn-group" uib-dropdown is-open="status.isopen">
                <button id="year-button" type="button" class="btn btn-primary" uib-dropdown-toggle ng-disabled="disabled">
                    Available Years <span class="caret"></span>
                </button>
                <ul uib-dropdown-menu role="menu" aria-labelledby="year-button">
                    <li role="menuitem" ng-repeat="year in validYear"><a ng-click="loadFile(year)">{{ year }}</a></li>
                </ul>
            </div>
        </div>

        <!-- step >0. select places -->
        <div ng-if="$index > 0" class="content">
            <ol>
                <li ng-repeat="h in candidates[step.label]">
                    <input type="checkbox" ng-model="selected[step.label][$index]">
                    {{ h.name }} / {{ h.duration }} / {{ h.count }} days
                    <span><a ng-click="recenterMap([$index])">map</a></span>
                </li>
            </ol>
            <p><a class="btn btn-success" ng-click="completeStep($parent.$index)">Done <span class="glyphicon glyphicon-ok"></span></a></p>
        </div>
    </div>
</div>

<!-- map -->
<leaflet ng-if="completedStepIndex > 0" markers="map.markers" lf-center="map.center" class="map"></leaflet>